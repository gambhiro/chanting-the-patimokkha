\documentclass[10pt,landscape]{article}

\makeatletter

\usepackage{graphicx}
\graphicspath{{./images/}}
\usepackage{xcolor}

%\definecolor[RGB]{dark-orange}{F69A00}

\usepackage{fontspec}
\setmainfont[Ligatures=TeX]{TeX Gyre Pagella}

\usepackage{amsmath}
\usepackage{calc}
\usepackage{eso-pic}

\usepackage{tikz}
\usetikzlibrary{positioning}

\usepackage{pgfplots}
\usepgfplotslibrary{dateplot}

\usepackage{pgfcalendar}
\usepackage{pgfplotstable}

\usepackage{geometry}
\geometry{
  paperheight=148mm,
  paperwidth=500mm,
  landscape,
}

\pgfplotstableset{string type,col sep=comma}

\pagestyle{empty}

\pgfplotsset{compat=1.13}

\makeatother

\begin{document}
\mbox{}

\AddToShipoutPictureFG*{\put(\LenToUnit{0.5cm},\LenToUnit{0.5cm}){%
\begin{minipage}[b][\paperheight - 1cm]{\paperwidth - 1cm}
\begin{tikzpicture}
\begin{axis}[
    title=Chanting the Pāṭimokkha,
    width=\paperwidth - 2cm,
    height=12cm,
    clip=false,
    date coordinates in=x,
    date ZERO=2014-11-21,
    cycle list={%
      {blue,mark=*,mark size=1pt},
    },
    ylabel=Time (mins),
    xtick=data,
    xmin=2014-11-20,
    xmax=2022-06-01,
    enlarge x limits={rel=0.02,lower},
    xticklabel style={yshift=-20pt,rotate=90,anchor=east,font=\small},
    xticklabel={\year-\month-\day},
    unbounded coords=jump,
    ymin=0,
    ymax=120,
    legend pos=north east,
    legend style={draw=none},
  ]

  \addplot[
    ybar,
    draw=none,
    fill=blue!30,
    nodes near coords,
    area legend,
  ] table[x=date,y=minutes] {./plotdata/patimokkha-chanting.csv};
  \addlegendentry{time};

  \addplot[
    ybar,
    draw=none,
    fill=orange,
    nodes near coords,
    area legend,
  ] table[x=date,y=bhikkhus] {./plotdata/patimokkha-chanting.csv};
  \addlegendentry{bhikkhus};

  \node [anchor=south, yshift=-20pt] at (axis cs:2014-11-21,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2015-04-03,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2015-04-17,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2015-05-17,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2015-06-15,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2015-06-30,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2015-07-30,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2015-08-29,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2015-09-12,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2015-10-12,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2015-11-25,0) {\includegraphics[width=5mm]{gb}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2016-02-22,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2016-04-06,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2016-05-20,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2016-07-19,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2016-08-03,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2016-09-01,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2016-11-14,0) {\includegraphics[width=5mm]{gb}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2016-11-29,0) {\includegraphics[width=5mm]{gb}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2016-12-14,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-01-12,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-01-27,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-02-25,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-03-12,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-03-27,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-04-11,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-04-25,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-05-10,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-07-08,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-07-23,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-08-07,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-08-21,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-09-05,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-09-20,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-11-03,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-11-18,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-12-03,0) {\includegraphics[width=5mm]{gb}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2017-12-17,0) {\includegraphics[width=5mm]{gb}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-01-16,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-02-14,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-03-01,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-03-16,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-03-31,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-04-14,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-05-14,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-05-29,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-07-12,0) {\includegraphics[width=5mm]{it}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-07-27,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-08-11,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-08-26,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-09-09,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-09-24,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-10-09,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-11-07,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-11-22,0) {\includegraphics[width=5mm]{gb}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-12-07,0) {\includegraphics[width=5mm]{gb}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2018-12-22,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2019-02-04,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2019-02-19,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2019-03-05,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2019-03-20,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2019-04-04,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2019-04-19,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2019-05-03,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2019-05-18,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2019-06-02,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2019-06-17,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2019-07-16,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2019-07-31,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2019-08-15,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2019-09-13,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2019-11-26,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2020-01-24,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2020-02-08,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2020-02-22,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2020-03-23,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2020-04-07,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2020-04-21,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2020-05-06,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2020-05-21,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2020-06-05,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2020-06-20,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2020-07-05,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2020-07-20,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2020-08-04,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2020-09-02,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2021-04-26,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2021-06-09,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2021-08-08,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2021-09-06,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2021-09-21,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2021-12-19,0) {\includegraphics[width=5mm]{gb}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2022-01-17,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2022-02-16,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2022-03-17,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2022-04-16,0) {\includegraphics[width=5mm]{pt}};
  \node [anchor=south, yshift=-20pt] at (axis cs:2022-04-30,0) {\includegraphics[width=5mm]{pt}};

\end{axis}
\end{tikzpicture}
\vfill\par\mbox{}
\end{minipage}%
}}

\end{document}

